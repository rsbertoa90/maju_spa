webpackJsonp([10],{"7CbY":function(t,e,s){var n=s("VU/8")(s("Ts8k"),s("r5Jt"),!1,null,null,null);t.exports=n.exports},T6qZ:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 row mt-2"},[s("div",{staticClass:"col-6 col-lg-3 m-0 p-0"},[s("button",{staticClass:"btn btn-block ",class:{"btn-outline-warning":"pendiente"!=t.status,"btn-warning":"pendiente"==t.status},on:{click:function(e){t.changestatus("pendiente")}}},[s("fa-icon",{attrs:{icon:"clock"}}),t._v("\n                    Pendientes\n                ")],1)]),t._v(" "),s("div",{staticClass:"col-6 col-lg-3 m-0 p-0"},[s("button",{staticClass:"btn btn-block",class:{"btn-outline-success":"pagado"!=t.status,"btn-success":"pagado"==t.status},on:{click:function(e){t.changestatus("pagado")}}},[s("fa-icon",{attrs:{icon:"dollar-sign"}}),t._v("\n                    Pagadas\n                ")],1)]),t._v(" "),s("div",{staticClass:"col-6 col-lg-3 m-0 p-0"},[s("button",{staticClass:"btn btn-block",class:{"btn-outline-info":"enviado"!=t.status,"btn-info":"enviado"==t.status},on:{click:function(e){t.changestatus("enviado")}}},[s("fa-icon",{attrs:{icon:"truck"}}),t._v("\n                    Enviadas\n                ")],1)]),t._v(" "),s("div",{staticClass:"col-6 col-lg-3 m-0 p-0"},[s("button",{staticClass:"btn btn-block",class:{"btn-outline-danger":"cancelado"!=t.status,"btn-danger":"cancelado"==t.status},on:{click:function(e){t.changestatus("cancelado")}}},[s("fa-icon",{attrs:{icon:"times"}}),t._v("\n                   Canceladas\n                ")],1)])])]),t._v(" "),s("div",{staticClass:"col-12 row"},[s("div",{staticClass:"col-12 col-lg-4 table-container"},[s("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),s("tbody",[s("tr",[s("td",{attrs:{colspan:"3"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})])]),t._v(" "),t._l(t.filteredOrders,function(e){return s("tr",{key:"order"+e.id,class:{"bg-info":e==t.selected},staticStyle:{cursor:"pointer"},on:{click:function(s){t.selected=e}}},[s("td",[t._v(t._s(t._f("datetime")(e.created_at)))]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.viewed,expression:"order.viewed"}],staticClass:"form-control checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.viewed)?t._i(e.viewed,null)>-1:e.viewed},on:{change:[function(s){var n=e.viewed,a=s.target,r=!!a.checked;if(Array.isArray(n)){var o=t._i(n,null);a.checked?o<0&&t.$set(e,"viewed",n.concat([null])):o>-1&&t.$set(e,"viewed",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"viewed",r)},function(s){t.viewed(e)}]}})])])})],2)])]),t._v(" "),s("div",{staticClass:"col-12 col-lg-8 bg-white"},[t.selected?s("app-order",{attrs:{order:t.selected},on:{statusChanged:t.statusChanged}}):t._e()],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("th",[this._v("Fecha")]),this._v(" "),e("th",[this._v("Cliente")]),this._v(" "),e("th",[this._v("Visto")])])}]}},Ts8k:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["order"],data:function(){return{city:null}},methods:{setStatus:function(t){var e=this;this.order.status=t;var s={order:this.order.id,field:"status",value:t};this.$http.put("/admin/order",s).then(function(t){e.$emit("statusChanged",t.data)})}},computed:{total:function(){var t=0;return this.order.order_products&&this.order.order_products.length>0&&this.order.order_products.forEach(function(e){t+=e.price*e.units}),t}},filters:{datetime:function(t){return moment(t).format("DD/MM/YYYY H:mm")}},created:function(){var t=this;this.order.shipping&&this.$http.get("/api/city/"+t.order.city_id).then(function(e){t.city=e.data})}}},XQ51:function(t,e,s){var n=s("hJ9Z");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);s("rjj0")("32e0033c",n,!0,{})},Z93Y:function(t,e,s){var n=s("VU/8")(s("ovFz"),s("T6qZ"),!1,function(t){s("XQ51")},null,null);t.exports=n.exports},hJ9Z:function(t,e,s){(t.exports=s("FZ+f")(!1)).push([t.i,".checkbox{width:30px;height:20px}.cursor-pointer{cursor:pointer}.table-container{height:85vh;scroll-behavior:auto;overflow-x:hidden;overflow-y:auto}",""])},ovFz:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("7CbY"),a=s.n(n);e.default={metaInfo:function(){return{title:"ADMIN"}},components:{appOrder:a.a},data:function(){return{searchTerm:"",orders:[],status:"pendiente",source:"online",filtered:[],selected:null}},methods:{viewed:function(t){t.viewed?t.viewed=1:t.viewed=0;var e={order:t.id,id:t.id,field:"viewed",value:t.viewed};this.$http.put("/admin/order",e)},setSource:function(t){this.source=t,this.selected=null},statusChanged:function(t){this.status=t.status},changestatus:function(t){this.status=t,this.selected=null}},computed:{filteredOrders:function(){var t=this,e=this.orders.filter(function(e){return e.source==t.source&&e.status==t.status}),s=this.searchTerm.trim().toLowerCase();return s&&(e=e.filter(function(t){return t.name.trim().toLowerCase().indexOf(s)>-1})),e=(e=_.sortBy(e,"created_at")).reverse()}},created:function(){var t=this;this.$http.get("/api/orders").then(function(e){t.orders=e.data})},filters:{datetime:function(t){return moment(t).format("DD/MM/YYYY H:mm")}}}},r5Jt:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"border border-primary p-3 mt-3"},[s("div",[s("div",[s("span",{staticClass:"font-weight-bold text-primary"},[t._v("Fecha: "+t._s(t._f("datetime")(t.order.created_at))+" ")]),t._v(" "),s("br"),t._v(" "),t.order.seller?s("span",{staticClass:"font-weight-bold text-primary"},[t._v("Vendedor: "+t._s(t.order.seller)+" ")]):t._e(),t._v(" "),t.order.comments?s("span",{staticClass:"mt-2"},[t._v(" -- "+t._s(t.order.comments)+" -- ")]):t._e()]),t._v(" "),s("table",{staticClass:"table table-striped table-bordered mt-3"},[t._m(0),t._v(" "),s("tbody",t._l(t.order.order_products,function(e){return s("tr",{key:"op"+e.product.id},[s("td",[t._v(" "+t._s(e.product.code)+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.product.name)+" ")]),t._v(" "),s("td",[t._v(" $"+t._s(t._f("price")(e.price))+" ")]),t._v(" "),s("td",[t._v(" "+t._s(e.units)+" ")]),t._v(" "),s("td",[t._v(" $"+t._s(t._f("price")(e.units*e.price))+" ")])])})),t._v(" "),s("tfoot",[s("tr",[s("td"),t._v(" "),s("td"),t._v(" "),s("td"),t._v(" "),s("td",{staticStyle:{color:"blue"}},[t._v("TOTAL")]),t._v(" "),s("td",{staticStyle:{color:"blue"}},[t._v(" $"+t._s(t._f("price")(t.total))+" ")])])])])]),t._v(" "),s("div",[s("ul",[t.order.name?s("li",[t._v("Nombre del cliente: "+t._s(t.order.name)+" ")]):t._e(),t._v(" "),t.order.phone?s("li",[t._v("Telefono: "+t._s(t.order.phone)+" ")]):t._e(),t._v(" "),t.order.email?s("li",[t._v("Email: "+t._s(t.order.email)+" ")]):t._e(),t._v(" "),t.order.message?s("li",[t._v("Mensaje adjunto: "+t._s(t.order.message)+" ")]):t._e()]),t._v(" "),t.order.shipping?s("div",[s("h4",[t._v("Datos de env√≠o")]),t._v(" "),s("ul",[t.city?s("li",[t._v("  Provincia: "+t._s(t.city.state.name)+" ")]):t._e(),t._v(" "),t.city?s("li",[t._v(" Ciudad: "+t._s(t.city.name)+" ")]):t._e(),t._v(" "),s("li",[t._v(" CP: "+t._s(t.order.cp)+"  ")]),t._v(" "),s("li",[t._v(" Direccion: "+t._s(t.order.address)+" ")]),t._v(" "),s("li",[t._v("Transporte: "+t._s(t.order.transport)+"  ")])])]):s("div",[t._v("\n                - Retira en local.\n            ")])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 offset-lg-9 col-lg-3"},[s("a",{staticClass:"btn btn-block btn-outline-primary",attrs:{href:"/admin/pdf/"+t.order.id,target:"_blank"}},[t._v("\n                Generar PDF\n            ")])])]),t._v(" "),s("div",{staticClass:"row mt-3"},["pagado"==t.order.status?s("div",{staticClass:"col-12 col-lg-4"},[s("button",{staticClass:"btn btn-block btn-outline-info",on:{click:function(e){t.setStatus("enviado")}}},[s("fa-icon",{attrs:{icon:"truck"}}),t._v("\n                Marcar como enviado\n            ")],1)]):t._e(),t._v(" "),"pagado"!=t.order.status&&"cancelado"!=t.order.status?s("div",{staticClass:"col-12 col-lg-4"},[s("button",{staticClass:"btn btn-block btn-outline-success",on:{click:function(e){t.setStatus("pagado")}}},[s("fa-icon",{attrs:{icon:"dollar-sign"}}),t._v("\n                Marcar como pagado\n            ")],1)]):t._e(),t._v(" "),"cancelado"!=t.order.status?s("div",{staticClass:"col-12 col-lg-4"},[s("button",{staticClass:"btn btn-block btn-outline-danger",on:{click:function(e){t.setStatus("cancelado")}}},[s("fa-icon",{attrs:{icon:"times"}}),t._v("\n                Marcar como Cancelado\n            ")],1)]):t._e(),t._v(" "),"pendiente"!=t.order.status&&"enviado"!=t.order.status?s("div",{staticClass:"col-12 col-lg-4"},[s("button",{staticClass:"btn btn-block btn-outline-warning",on:{click:function(e){t.setStatus("pendiente")}}},[s("fa-icon",{attrs:{icon:"clock"}}),t._v("\n                Marcar como Pendiente\n            ")],1)]):t._e()])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Codigo")]),t._v(" "),s("th",[t._v("Producto")]),t._v(" "),s("th",[t._v("Precio")]),t._v(" "),s("th",[t._v("Cantidad")]),t._v(" "),s("th",[t._v("Subtotal")])])])}]}}});
webpackJsonp([6],{"14ek":function(t,e,a){var r=a("VU/8")(a("wHLV"),a("XcBl"),!1,function(t){a("zpNS")},"data-v-d8f6d500",null);t.exports=r.exports},"2NnV":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.total>1?a("nav",{attrs:{"aria-label":"Paginator"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:1==t.selectedPage}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Previous"},on:{click:function(e){t.select(t.selectedPage-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.selectedPage==e}},[a("div",{staticClass:"page-link",on:{click:function(a){t.select(e)}}},[t._v(t._s(e))])])}),t._v(" "),a("li",{staticClass:"page-item",class:{disabled:t.selectedPage==t.total}},[a("a",{staticClass:"page-link",attrs:{"aria-label":"Next"},on:{click:function(e){t.select(t.selectedPage+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),a("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]):t._e()},staticRenderFns:[]}},"3l3g":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{id:"image-modal",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t.product?a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.product.name)+" ")]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(e){t.closedModal()}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"image-container"},[a("transition",{attrs:{"leave-active-class":" animated slideOutRight faster position-absolute"}},[t.product.images&&t.product.images.length>0&&t.product.images[t.i]?a("img",{key:t.product.images[t.i].id,staticClass:"w-100 ",attrs:{src:t.product.images[t.i].url,alt:t.product.name}}):t._e()]),t._v(" "),!t.product.images||!t.product.images.length>0?a("img",{attrs:{src:"/storage/images/app/no-image.png",alt:t.product.name}}):t._e(),t._v(" "),t.product.images&&t.product.images.length>1?a("div",{staticClass:"controls"},[a("span",{staticClass:"chevron-button",on:{click:function(e){e.preventDefault(),t.changeImage("prev")}}},[a("fa-icon",{staticClass:"text-info",attrs:{icon:"chevron-left"}})],1),t._v(" "),a("span",{staticClass:"chevron-button text-info",on:{click:function(e){e.preventDefault(),t.changeImage("next")}}},[a("fa-icon",{attrs:{icon:"chevron-right"}})],1)]):t._e(),t._v(" "),t.product.images&&t.product.images.length>0?a("button",{staticClass:"close-button btn btn-danger btn-sm",attrs:{type:"submit"},on:{click:function(e){t.destroyImage()}}},[t._v("X")]):t._e(),t._v(" "),t.product.images&&t.product.images.length>0?a("button",{staticClass:"btn btn-info set-first",on:{click:function(e){t.setFirst()}}},[t._v("Definir primera imagen")]):t._e()],1),t._v(" "),a("form",{attrs:{enctype:"multipart/form-data",name:"uploader"}},[a("csrf"),t._v(" "),a("div",{staticClass:"d-flex flex-column"},[a("label",{staticClass:"text-info text-center"},[t._v("  \n                    Subir una imagen   \n                ")]),t._v(" "),a("input",{ref:"daFile",staticClass:"display-none",attrs:{type:"file",name:"file",accept:"image/x-png,image/gif,image/jpeg"}})])],1)]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.save}},[t._v("Guardar")]),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cerrar")])])]):t._e()])])},staticRenderFns:[]}},"4WFN":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["selectedProducts"],data:function(){return{variation:0}},methods:{saveChange:function(t,e){var a=this,r={product:t.id,field:e,value:t[e]};this.$http.put("/admin/product/update",r).then(function(t){a.$emit("refresh")})},applyVariation:function(){var t=this,e=1+this.variation/100;this.selectedProducts.forEach(function(a){a.price=a.price*e,a.pck_price=a.pck_price*e,t.saveChange(a,"price"),t.saveChange(a,"pck_price")}),t.variation=0,t.$emit("resetCheckboxes")}}}},"8YHa":function(t,e,a){var r=a("M/YB");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("778e9f54",r,!0,{})},Idmq:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".modal-content[data-v-b2658bf6]{height:90vh;overflow-y:auto}.chevron-button[data-v-b2658bf6]{font-size:1.5rem;padding:3px;cursor:pointer;z-index:300;background-color:#0000}.image-container[data-v-b2658bf6]{position:relative;overflow:hidden}.close-button[data-v-b2658bf6]{position:absolute;bottom:10px;left:50%}.controls[data-v-b2658bf6]{position:absolute;bottom:50%;left:0;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.controls .fa[data-v-b2658bf6]{font-size:2rem;cursor:pointer}.set-first[data-v-b2658bf6]{position:absolute;top:10px;left:50%}",""])},JAxG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("bDwN"),o=a.n(r),i=a("MS5n"),s=a.n(i),n=a("14ek"),c=a.n(n),l=a("W/AX"),d=a.n(l);e.default={metaInfo:function(){return{title:"ADMIN"}},components:{paginator:d.a,changePrices:s.a,adminCreate:o.a,productRow:c.a},data:function(){return{loading:!0,searchMode:!1,searchTerm:"",selectedPage:1,productsPerPage:30,selector:{id:"all",checked:!1},variation:0,products:[],list:[],supliers:[],showModal:!1,orderBy:"suplier.name"}},computed:{categories:function(){return this.$store.getters.getCategories},selectedProducts:function(){var t=[];return this.products.forEach(function(e){e.selected&&t.push(e)}),t},filterProducts:function(){var t=this;if(this.searchMode)return this.searchFilter();if(this.products.length>0){var e=null;if("category.name"==this.orderBy?e="category":"suplier.name"==this.orderBy&&(e="suplier"),e&&"all"!=this.selector.id){var a=this.products.filter(function(a){return a[e].id==t.selector.id});return _.orderBy(a,this.orderBy)}return _.orderBy(this.products,this.orderBy)}return[]},filteredProducts:function(){var t=this.filterProducts;return this.paginate(t,this.selectedPage)}},watch:{orderBy:function(){this.products=_.sortBy(this.products,this.orderBy),this.selector.id="all",this.resetFilters()},"selector.id":function(){this.resetFilters()}},methods:{resetFilters:function(){this.resetCheckboxes(),this.selectedPage=1,this.searchMode=!1,this.searchTerm=""},search:function(){var t=this;this.loading=!0;var e=this.searchTerm;this.selector.id="all",this.selectedPage=1,setTimeout(function(){t.searchTerm=e,t.searchMode=!0,t.loading=!1},100),this.searchMode=!0},searchComparision:function(t,e){var a=e.name.toLowerCase().trim();t=t.toLowerCase().trim();var r=e.category.name.toLowerCase().trim(),o=e.suplier.name.toLowerCase().trim(),i=e.code.toLowerCase().trim();return a.indexOf(t)>-1||r.indexOf(t)>-1||o.indexOf(t)>-1||i.indexOf(t)>-1},searchFilter:function(){var t=this;this.loading=!0;var e=this.searchTerm.split(" "),a=[];return this.products.forEach(function(r){var o=!0;e.forEach(function(e){o&&!t.searchComparision(e,r)&&(o=!1)}),o&&a.push(r)}),this.loading=!1,a},paginate:function(t,e){if(t&&t.length>0)return e--,t.slice(e*this.productsPerPage,(e+1)*this.productsPerPage)},resetCheckboxes:function(){this.selector.checked=!1,this.products.forEach(function(t){void 0==t.selected?Vue.set(t,"selected",!1):t.selected=!1})},checkSelect:function(){var t=this;"all"==this.selector.id?this.products.forEach(function(e){void 0==e.selected&&Vue.set(e,"selected",!0),e.selected=t.selector.checked}):"category.name"==this.orderBy?this.products.forEach(function(e){e.category.id==t.selector.id&&(void 0==e.selected&&Vue.set(e,"selected",!0),e.selected=t.selector.checked)}):"suplier.name"==this.orderBy&&this.products.forEach(function(e){e.suplier.id==t.selector.id&&(void 0==e.selected&&Vue.set(e,"selected",!0),e.selected=t.selector.checked)})},refresh:function(){var t=this;this.$store.dispatch("fetchCategories"),$.ajax({url:"api/supliers",success:function(e){t.supliers=e,t.supliers=_.sortBy(t.supliers,"name")}}),$.ajax({url:"api/products",success:function(e){t.products=e,t.products=_.sortBy(t.products,t.orderBy),t.loading=!1}})},saveChange:function(t,e){var a={product:t.id,field:e,value:t[e]};$.ajax({method:"put",data:a,url:"/admin/product/update"})},selectAllProducts:function(){this.products.forEach(function(t){void 0==t.selected?Vue.set(t,"selected",!0):t.selected=!0})}},created:function(){this.refresh()},mounted:function(){var t=this;this.$http.get("/getuser").then(function(e){t.user=e.data})}}},K6it:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["categories","supliers"],data:function(){return{showForm:!1,editProvider:!1,editCategory:!1,newCategory:null,newSuplier:null,formData:{price:null,pck_price:null,pck_units:null,category_id:null,suplier_id:null,name:null,code:null}}},methods:{valid:function(){var t=this;if("new"==t.formData.category_id&&!t.newCategory)return swal("error","No ingreso un nombre para la nueva categoria","error"),!1;if("new"==t.formData.suplier_id&&!t.newSuplier)return swal("error","No ingreso un nombre para el nuevo proveedor","error"),!1;var e=null;return t.categories.forEach(function(a){var r=a.products.find(function(e){return e.code==t.formData.code});null!=r&&(e=r)}),null==e||(swal("error","ya existe un producto con el codigo"+t.formData.code,"error"),!1)},resetForm:function(){this.formData={price:null,pck_price:null,pck_units:null,category_id:null,name:null,code:null}},saveProduct:function(){var t=this;t.$http.post("/admin/product/",t.formData).then(function(e){t.$emit("productSaved",e.data),swal("Producto guardado","","success"),t.resetForm(),t.$emit("productSaved"),t.showForm=!1})},saveCategory:function(t){var e=this;null!=e.categories.find(function(t){return t.name.toLowerCase()==e.newCategory.toLowerCase()})?swal("Error","Ya existe la categoria "+e.newCategory,"error"):e.$http.post("/admin/category/",{name:this.newCategory,_token:csrf}).then(function(a){var r=a.data;e.formData.category_id=r.id,t()})},saveSuplier:function(t){var e=this;null!=e.supliers.find(function(t){return t.name.toLowerCase()==e.newSuplier.toLowerCase()})?swal("Error","Ya existe el proveedor "+e.newSuplier,"error"):e.$http.post("/admin/suplier/",{name:this.newSuplier}).then(function(t){var a=t.data;e.formData.suplier_id=a.id,e.saveProduct()})},save:function(){var t=this;this.valid()&&("new"==this.formData.category_id?"new"==this.formData.suplier_id?t.saveCategory(t.saveSuplier):t.saveCategory(t.saveProduct):"new"==this.formData.suplier_id?t.saveSuplier():t.saveProduct())}}}},KsFY:function(t,e,a){var r=a("vEn8");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("825c1860",r,!0,{})},"M/YB":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".pagination[data-v-63445fdb]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}",""])},MS5n:function(t,e,a){var r=a("VU/8")(a("4WFN"),a("wf8d"),!1,null,null,null);t.exports=r.exports},OIi6:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[t.loading?a("div",{staticClass:"loader"},[a("dot-loader",{attrs:{loading:t.loading,size:"200px"}})],1):t._e(),t._v(" "),"sm"==t.$mq?a("div",{staticClass:"w-100 d-flex flex-column align-items-center jusify-content-center"},[a("h2",{staticClass:"text-warning"},[t._v("\n            Lo sentimos. El administrador no esta disponible en dispositivos moviles.\n        ")])]):a("div",{staticClass:"row"},[t._m(0),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"col-12"},[a("admin-create",{attrs:{supliers:t.supliers,categories:t.categories},on:{productSaved:t.refresh}})],1),t._v(" "),a("hr"),t._v(" "),a("hr",{staticClass:"w-100"}),t._v(" "),a("div",{staticClass:"col-12 row"},[a("div",{staticClass:"col-6 row"},[a("label",{staticClass:"text-info font-weight-bold col-4"},[t._v("Ordenar por")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.orderBy,expression:"orderBy"}],staticClass:"form-control col-6",attrs:{id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.orderBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"suplier.name"}},[t._v("Proveedor")]),t._v(" "),a("option",{attrs:{value:"category.name"}},[t._v("Categoria")]),t._v(" "),a("option",{attrs:{value:"name"}},[t._v("Producto")]),t._v(" "),a("option",{attrs:{value:"price"}},[t._v("Precio")])])]),t._v(" "),a("div",{staticClass:"col-6 d-flex flex-column"},[a("div",{staticClass:"d-flex align-items-center "},[a("label",{staticClass:"text-info font-weight-bold"},[t._v("Filtrar")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.selector.checked,expression:"selector.checked"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selector.checked)?t._i(t.selector.checked,null)>-1:t.selector.checked},on:{change:[function(e){var a=t.selector.checked,r=e.target,o=!!r.checked;if(Array.isArray(a)){var i=t._i(a,null);r.checked?i<0&&t.$set(t.selector,"checked",a.concat([null])):i>-1&&t.$set(t.selector,"checked",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.selector,"checked",o)},t.checkSelect]}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selector.id,expression:"selector.id"}],staticClass:"form-control col-4",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.selector,"id",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"all"}},[t._v(" Todo")]),t._v(" "),t._l(t.categories,function(e){return"category.name"==t.orderBy?a("option",{key:e.id,domProps:{value:e.id}},[t._v(" \n                                    "+t._s(e.name)+"\n                            ")]):t._e()}),t._v(" "),t._l(t.supliers,function(e){return"suplier.name"==t.orderBy?a("option",{key:e.id,domProps:{value:e.id}},[t._v(" \n                                    "+t._s(e.name)+"\n                            ")]):t._e()})],2)])])]),t._v(" "),a("div",{staticClass:"col-12 row mt-3 mb-3 ml-2"},[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.searchTerm,expression:"searchTerm",modifiers:{lazy:!0}}],staticClass:"form-control col-4",attrs:{placeholder:"BUSCAR"},domProps:{value:t.searchTerm},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null},change:function(e){t.searchTerm=e.target.value}}}),t._v(" "),a("button",{staticClass:"btn btn-outline-success ml-2",on:{click:t.search}},[t._v("Buscar")])]),t._v(" "),a("div",{staticClass:"row mt-4 ml-2"},[a("paginator",{attrs:{selectedPage:t.selectedPage,products:t.filterProducts,productsPerPage:t.productsPerPage},on:{selectPage:function(e){t.selectedPage=e}}})],1),t._v(" "),a("table",{staticClass:"table table-striped table-bordered ",attrs:{id:"table"}},[t._m(1),t._v(" "),t._l(t.filteredProducts,function(e){return a("product-row",{key:e.id,tag:"tr",attrs:{product:e,supliers:t.supliers,categories:t.categories},on:{refresh:t.refresh}})})],2),t._v(" "),a("paginator",{attrs:{selectedPage:t.selectedPage,products:t.filterProducts,productsPerPage:t.productsPerPage},on:{selectPage:function(e){t.selectedPage=e}}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 d-flex justify-content-center"},[e("img",{staticStyle:{width:"200px",height:"110px"},attrs:{src:"/storage/images/app/MAJU.jpg",alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{},[a("th",[t._v("imagen")]),t._v(" "),a("th",[t._v("Codigo")]),t._v(" "),a("th",[t._v("Proveedor")]),t._v(" "),a("th",[t._v("Categoria")]),t._v(" "),a("th",[t._v("Producto")]),t._v(" "),a("th",[t._v("Precio")]),t._v(" "),a("th",[t._v("Unidades x bulto")]),t._v(" "),a("th",[t._v("Precio en bulto")])])}]}},OYbY:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"input[type=checkbox][data-v-d8f6d500]{width:25px;margin:10px;height:20px}.smallField[data-v-d8f6d500]{width:80px}td[data-v-d8f6d500]{min-width:120px}.btn-link[data-v-d8f6d500]{color:#000}td img[data-v-d8f6d500]{width:10vw}@media (max-width:600px){.card-body[data-v-d8f6d500],.card[data-v-d8f6d500],.container[data-v-d8f6d500],table[data-v-d8f6d500]{font-size:.66rem;padding:0}input[data-v-d8f6d500],td[data-v-d8f6d500],th[data-v-d8f6d500]{white-space:nowrap;width:13vw;padding:2px}.nametd[data-v-d8f6d500]{width:25vw}}",""])},UZ9S:function(t,e,a){var r=a("VU/8")(a("nRID"),a("3l3g"),!1,function(t){a("w0jG")},"data-v-b2658bf6",null);t.exports=r.exports},"W/AX":function(t,e,a){var r=a("VU/8")(a("m9cQ"),a("2NnV"),!1,function(t){a("8YHa")},"data-v-63445fdb",null);t.exports=r.exports},XcBl:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t.product.images&&t.product.images.length>0?a("img",{staticStyle:{width:"150px"},attrs:{src:t.product.images[0].url,alt:t.product.name},on:{click:function(e){t.imgModal()}}}):a("img",{attrs:{src:"/storage/images/app/no-image.png",alt:t.product.name},on:{click:function(e){t.imgModal(t.product)}}})]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.code,expression:"product.code",modifiers:{lazy:!0}}],staticClass:"form-control smallField",attrs:{type:"text"},domProps:{value:t.product.code},on:{change:[function(e){t.$set(t.product,"code",e.target.value)},function(e){t.saveChange(t.product,"code")}]}})]),t._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.suplier_id,expression:"product.suplier_id"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"suplier_id",e.target.multiple?a:a[0])},function(e){t.changed(t.product,"suplier")}]}},t._l(t.supliers,function(e){return a("option",{key:e.id,domProps:{value:e.id,selected:e.id==t.product.suplier_id}},[t._v(" \n                "+t._s(e.name)+" \n            ")])}))]),t._v(" "),a("td",[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.category_id,expression:"product.category_id"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"category_id",e.target.multiple?a:a[0])},function(e){t.changed(t.product,"category")}]}},t._l(t.categories,function(e){return a("option",{key:e.id,domProps:{value:e.id,selected:t.product.category.id==e.id}},[t._v(" \n                "+t._s(e.name)+" \n            ")])}))]),t._v(" "),a("td",[a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.name,expression:"product.name",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{placeholder:"NOMBRE",rows:"2",type:"text"},domProps:{value:t.product.name},on:{change:[function(e){t.$set(t.product,"name",e.target.value)},function(e){t.saveChange(t.product,"name")}]}}),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.description,expression:"product.description",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{placeholder:"DESCRIPCION",rows:"2",type:"text"},domProps:{value:t.product.description},on:{change:[function(e){t.$set(t.product,"description",e.target.value)},function(e){t.saveChange(t.product,"description")}]}})]),t._v(" "),a("td",[a("div",{staticClass:"row w-100 d-flex align-items-center"},[t._v("\n            $"),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.price,expression:"product.price",modifiers:{lazy:!0}}],staticClass:" form-control smallField",attrs:{type:"number",step:".01"},domProps:{value:t.product.price},on:{change:[function(e){t.$set(t.product,"price",e.target.value)},function(e){t.saveChange(t.product,"price")}]}})])]),t._v(" "),a("td",{staticClass:"smallField"},[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.pck_units,expression:"product.pck_units",modifiers:{lazy:!0}}],staticClass:"form-control smallField ",attrs:{step:"1",type:"number"},domProps:{value:t.product.pck_units},on:{change:[function(e){t.$set(t.product,"pck_units",e.target.value)},function(e){t.saveChange(t.product,"pck_units")}]}})]),t._v(" "),a("td",[a("div",{staticClass:"row w-100 d-flex align-items-center"},[t._v("\n            \n            $"),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.product.pck_price,expression:"product.pck_price",modifiers:{lazy:!0}}],staticClass:"form-control smallField",attrs:{type:"number",step:".01"},domProps:{value:t.product.pck_price},on:{change:[function(e){t.$set(t.product,"pck_price",e.target.value)},function(e){t.saveChange(t.product,"pck_price")}]}})])]),t._v(" "),a("td",{staticClass:"d-flex flex-column justify-content-center align-items-center p-0"},[a("button",{staticClass:"btn btn-sm btn-outline-danger m-1",on:{click:function(e){e.preventDefault(),t.deleteProduct(t.product)}}},[a("fa-icon",{attrs:{icon:"trash"}})],1),t._v(" "),a("button",{staticClass:"btn btn-sm m-1",class:{"btn-info":!t.product.paused,"btn-success":t.product.paused},on:{click:function(e){e.preventDefault(),t.togglePause(t.product)}}},[t.product.paused?a("fa-icon",{staticClass:"text-white",attrs:{icon:"play"}}):a("fa-icon",{staticClass:"text-white",attrs:{icon:"pause-circle"}})],1),t._v(" "),a("button",{staticClass:"btn btn-sm m-1",class:{"btn-secondary":!t.product.offer,"btn-info":t.product.offer},on:{click:function(e){e.preventDefault(),t.toggleOffer(t.product)}}},[t._v("\n            Oferta\n        ")])]),t._v(" "),t.product&&t.showModal?a("image-modal",{ref:"modal",attrs:{product:t.product},on:{refresh:function(e){t.refresh()},closedModal:function(e){t.showModal=!1}}}):t._e()],1)},staticRenderFns:[]}},bDwN:function(t,e,a){var r=a("VU/8")(a("K6it"),a("u0En"),!1,null,null,null);t.exports=r.exports},m9cQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["selectedPage","products","productsPerPage"],computed:{total:function(){if(this.products)return this.products.length/this.productsPerPage},pages:function(){var t=this.total;t%1!=0&&t++;for(var e=[],a=1;a<t;a++)e.push(a);return e}},methods:{select:function(t){this.$emit("selectPage",t)}}}},nRID:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["product"],data:function(){return{file:null,i:0,csrf:csrf,show:!0}},watch:{product:function(){this.show=!0}},methods:{destroyImage:function(){var t=this,e={id:t.product.images[t.i].id};this.$http.post("/admin/product/deleteImage",e).then(function(e){console.log("deleted"),t.product.images.splice(t.i,1),t.i=0})},setFirst:function(){var t=this;this.product.images.forEach(function(t){t.first=0}),this.product.images[this.i].first=1;var e={product:this.product.id,first:this.product.images[this.i].id};this.$http.put("/admin/product/setFirstImage",e).then(function(e){$("#image-modal").modal("hide"),t.$emit("closedModal"),t.$emit("refresh")})},closedModal:function(){this.i=0,this.$emit("closedModal")},save:function(t){var e,a,r,o=this,i=o.$refs.daFile.files[0],s=new FormData;s.append("image",i),s.append("product",this.product.id),this.$http.post("/admin/product/image",s,{emulateHTTP:!0,emulateJSON:!0,headers:(e={"X-File-Name":"image","Content-Type":"multipart/form-data"},a="Content-Type",r="application/x-www-form-urlencoded",a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e)}).then(function(t){$("#image-modal").modal("hide"),o.$emit("refresh"),o.$emit("closedModal")})},changeImage:function(t){"next"==t?(this.i++,this.product.images[this.i]||(this.i=0)):(this.i--,this.i<0&&(this.i=this.product.images.length-1))}}}},u0En:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"btn btn-lg btn-info",on:{click:function(e){t.showForm=!t.showForm}}},[t._v("Nuevo Producto")]),t._v(" "),t.showForm?a("form",{ref:"form",staticClass:"form form-inline row ml-1 d-flex align-items-end",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Codigo")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.code,expression:"formData.code",modifiers:{trim:!0}}],staticClass:"col-12",attrs:{required:"",type:"text"},domProps:{value:t.formData.code},on:{input:function(e){e.target.composing||t.$set(t.formData,"code",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12"},[t._v("Proveedor")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.suplier_id,expression:"formData.suplier_id",modifiers:{trim:!0}}],staticClass:"col-12 form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"suplier_id",e.target.multiple?a:a[0])}}},[t._l(t.supliers,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                   ")])}),t._v(" "),a("option",{staticClass:"text-success",attrs:{value:"new"}},[t._v("Nuevo")])],2),t._v(" "),"new"==t.formData.suplier_id?a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newSuplier,expression:"newSuplier",modifiers:{trim:!0}}],attrs:{placeholder:"Nuevo proveedor",type:"text"},domProps:{value:t.newSuplier},on:{input:function(e){e.target.composing||(t.newSuplier=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}):t._e()]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Categoria")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.category_id,expression:"formData.category_id",modifiers:{trim:!0}}],staticClass:"col-12 form-control",attrs:{required:"",id:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"category_id",e.target.multiple?a:a[0])}}},[t._l(t.categories,function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                      "+t._s(e.name)+"\n                   ")])}),t._v(" "),a("option",{staticClass:"text-success",attrs:{value:"new"}},[t._v("Nueva")])],2),t._v(" "),"new"==t.formData.category_id?a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newCategory,expression:"newCategory",modifiers:{trim:!0}}],attrs:{placeholder:"Nueva Categoria",type:"text"},domProps:{value:t.newCategory},on:{input:function(e){e.target.composing||(t.newCategory=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}):t._e()]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Producto")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.name,expression:"formData.name",modifiers:{trim:!0}}],staticClass:"col-12",attrs:{rows:"2",required:"",type:"text"},domProps:{value:t.formData.name},on:{input:function(e){e.target.composing||t.$set(t.formData,"name",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Precio")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.price,expression:"formData.price",modifiers:{trim:!0}}],staticClass:"col-12",attrs:{min:"0",step:".01",required:"",type:"number"},domProps:{value:t.formData.price},on:{input:function(e){e.target.composing||t.$set(t.formData,"price",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Unidades x bulto")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.pck_units,expression:"formData.pck_units",modifiers:{trim:!0}}],staticClass:"col-12",attrs:{min:"0",required:"",type:"number",step:"1"},domProps:{value:t.formData.pck_units},on:{input:function(e){e.target.composing||t.$set(t.formData,"pck_units",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),a("div",{staticClass:"col-2 row"},[a("label",{staticClass:"col-12",attrs:{for:""}},[t._v("Precio x mayor")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.formData.pck_price,expression:"formData.pck_price",modifiers:{trim:!0}}],staticClass:"col-12",attrs:{step:".01",min:"0",required:"",type:"number"},domProps:{value:t.formData.pck_price},on:{input:function(e){e.target.composing||t.$set(t.formData,"pck_price",e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),t._m(0)]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"offset-11"},[e("button",{staticClass:"btn btn-outline-success align-self-end justify-self-end",attrs:{type:"submit"}},[this._v(" GUARDAR ")])])}]}},"vC/7":function(t,e,a){var r=a("VU/8")(a("JAxG"),a("OIi6"),!1,function(t){a("KsFY")},"data-v-a42dc9a2",null);t.exports=r.exports},vEn8:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".loader[data-v-a42dc9a2]{position:fixed;height:100%;width:100%;z-index:110;background-color:#ddddddaa;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:start;padding-top:5%}input[type=checkbox][data-v-a42dc9a2]{width:25px;margin:10px;height:20px}.smallField[data-v-a42dc9a2]{width:80px}td[data-v-a42dc9a2]{min-width:120px}.btn-link[data-v-a42dc9a2]{color:#000}td img[data-v-a42dc9a2]{width:10vw}@media(max-width:600px){.card-body[data-v-a42dc9a2],.card[data-v-a42dc9a2],.container[data-v-a42dc9a2],table[data-v-a42dc9a2]{font-size:.66rem;padding:0}input[data-v-a42dc9a2],td[data-v-a42dc9a2],th[data-v-a42dc9a2]{white-space:nowrap;width:13vw;padding:2px}.nametd[data-v-a42dc9a2]{width:25vw}}",""])},w0jG:function(t,e,a){var r=a("Idmq");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("39c980d3",r,!0,{})},wHLV:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("UZ9S"),o=a.n(r);e.default={components:{imageModal:o.a},props:["product","supliers","categories"],data:function(){return{showModal:!1}},methods:{refresh:function(){this.$emit("refresh")},saveChange:function(t,e){var a={product:t.id,field:e,value:t[e]};this.$http.put("/admin/product/update",a)},togglePause:function(t){t.paused=!t.paused,this.saveChange(t,"paused")},toggleOffer:function(t){t.offer=!t.offer,this.saveChange(t,"offer")},deleteProduct:function(t){var e=this,a=this;swal({title:"¿Estas seguro de elimiar este producto?",text:"",type:"warning",buttons:["Cancelar","Borrar!"],dangerMode:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Borrar!",cancelButtonText:"Cancelar!",closeOnConfirm:!1,closeOnCancel:!1}).then(function(r){r&&e.$http.delete("/admin/product/"+t.id).then(function(t){a.$emit("refresh")})})},changed:function(t,e){this.saveChange(t,e+"_id")},imgModal:function(){var t=this;this.showModal=!0,setTimeout(function(){var e=t.$refs.modal.$el;$(e).modal("show")},100)}}}},wf8d:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-4 d-flex flex-column justify-content-center align-items-center"},[a("h4",[t._v("Cambiar precios masivo")]),t._v(" "),a("h5",[a("span",{staticClass:"text-info"},[t._v(t._s(t.selectedProducts.length))]),t._v("  Productos seleccionados \n    ")]),t._v(" "),a("div",{staticClass:"d-flex justify-content-center"},[a("button",{staticClass:"mr-2",on:{click:function(e){t.variation-=1}}},[t._v("-")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.variation,expression:"variation"}],staticStyle:{width:"45px"},attrs:{type:"number"},domProps:{value:t.variation},on:{input:function(e){e.target.composing||(t.variation=e.target.value)}}}),t._v(" %\n        "),a("button",{staticClass:"ml-2",on:{click:function(e){t.variation+=1}}},[t._v("+")])]),t._v(" "),0!=t.variation&&t.selectedProducts.length>0?a("button",{staticClass:"btn btn-md btn-outline-success mt-1",on:{click:t.applyVariation}},[t._v("Aplicar")]):t._e()])},staticRenderFns:[]}},zpNS:function(t,e,a){var r=a("OYbY");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("d0e88242",r,!0,{})}});